{
  "interval": {
    "intervalStart": "2025-11-16T00:00:00.000Z",
    "intervalEnd": "2025-11-23T00:00:00.000Z",
    "intervalType": "week"
  },
  "repository": "elizaos-plugins/plugin-discord",
  "overview": "From 2025-11-16 to 2025-11-23, elizaos-plugins/plugin-discord had 1 new PRs (2 merged), 0 new issues, and 6 active contributors.",
  "topIssues": [],
  "topPRs": [
    {
      "id": "PR_kwDOOtXZkc6wwBNq",
      "title": "Discord slash commands interface, modal interaction enhancements, attachment fixes",
      "author": "odilitime",
      "number": 23,
      "body": "<!-- CURSOR_SUMMARY -->\n> [!NOTE]\n> Adds dynamic slash command registration and modal handling, enables sending attachments in DMs/channels, and improves message/interaction processing with new exports.\n> \n> - **Discord Service**:\n>   - Introduces dynamic slash command system: `SLASH_COMMAND`/`MODAL_SUBMIT` events, `DiscordSlashCommand` type, `slashCommands` store, and runtime event `DISCORD_REGISTER_COMMANDS` to register/update app and guild commands.\n>   - Enhances interaction handling: ensures connections for interactions and emits unified events (no automatic defer to allow ephemeral replies).\n>   - Makes `clientReadyPromise` public/nullable; refines client init and logging.\n> - **Messaging**:\n>   - Enables sending attachments in DMs and channels by converting `Media` to `AttachmentBuilder` and passing to `sendMessageInChunks`.\n>   - Improves reply reference resolution via `fetchReference`; refines permission checks and structured logging.\n> - **Utils**:\n>   - Widens `sendMessageInChunks` `files` type to accept `AttachmentBuilder`; attaches files on last chunk; safer component handling.\n> - **Voice**:\n>   - Updates callback signature in voice response handler.\n> - **Exports**:\n>   - Re-exports `DISCORD_SERVICE_NAME`, `DiscordService`, and `IDiscordService` from `index`.\n> \n> <sup>Written by [Cursor Bugbot](https://cursor.com/dashboard?tab=bugbot) for commit 7fd4add1cc73f5c5b8780dd073aa16fe663d4029. This will update automatically on new commits. Configure [here](https://cursor.com/dashboard?tab=bugbot).</sup>\n<!-- /CURSOR_SUMMARY -->\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n\n## Summary by CodeRabbit\n\n* **New Features**\n  * Added slash command registration and handling capabilities\n  * Introduced modal submission support for enhanced interactions\n  * Added client readiness detection for better initialization tracking\n  * Implemented channel permission management and access controls\n\n* **Improvements**\n  * Enhanced attachment handling in messages\n  * Improved message reference resolution and context tracking\n  * Better error handling and diagnostic logging during startup and runtime\n\n* **Refactor**\n  * Updated event types and payload structures for interactions\n\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->",
      "repository": "elizaos-plugins/plugin-discord",
      "createdAt": "2025-10-31T04:21:47Z",
      "mergedAt": "2025-11-21T06:41:42Z",
      "additions": 683,
      "deletions": 345
    },
    {
      "id": "PR_kwDOOtXZkc6xNPtm",
      "title": "feat: integrate unified messaging API",
      "author": "standujar",
      "number": 24,
      "body": "<!-- Use this template by filling in information and copying and pasting relevant items out of the HTML comments. -->\r\n\r\n# Relates to\r\n\r\nRelates to elizaOS/eliza#6095 and https://github.com/elizaOS/eliza/pull/6111 - Unified messaging API\r\n\r\nWe have to wait https://github.com/elizaOS/eliza/pull/6111 to be merged and released 1.6.4 a least before merging this one.\r\n\r\nDepends on: https://github.com/elizaOS/eliza/pull/6111\r\n\r\n# Risks\r\n\r\n**Low risk**\r\n\r\nThis change is non-breaking and fully backward compatible:\r\n- Uses unified API when available via `runtime.elizaOS.sendMessage()`\r\n- Falls back to `messageService.handleMessage()` for standalone mode\r\n- Includes logging to track which path is used\r\n- Well-tested with live Discord bot\r\n\r\nPotential areas affected:\r\n- Message processing flow (now uses unified API)\r\n- Discord message handling (improved error handling and cleanup)\r\n- Service initialization (cleaner code, removed unnecessary wrapper)\r\n\r\n# Background\r\n\r\n## What does this PR do?\r\n\r\nThis PR integrates the new unified messaging API (`elizaOS.sendMessage()`) from elizaOS/eliza#6095, allowing the Discord plugin to use the standardized messaging entry point.\r\n\r\n**Key changes:**\r\n- **messages.ts**: Refactored `handleMessage()` to use `elizaOS.sendMessage()` when available\r\n- Added fallback to `messageService.handleMessage()` for standalone mode\r\n- Added debug logging to track which messaging path is used\r\n- **service.ts**: Cleaned up Discord client initialization and improved error handling\r\n- Updated `@elizaos/core` dependency to `^1.6.4`\r\n\r\n**Benefits:**\r\n- Standardized messaging across all platforms\r\n- Automatic field auto-filling (id, agentId, createdAt)\r\n- Better connection management via `ensureConnection`\r\n- Support for SYNC/ASYNC modes with callbacks\r\n- Reduced code duplication\r\n\r\n## What kind of change is this?\r\n\r\n- [x] Features (non-breaking change which adds functionality)\r\n- [x] Improvements (misc. changes to existing features)\r\n- [x] Updates (new versions of included code)\r\n\r\n## Why are we doing this?\r\n\r\nThe unified messaging API provides a single, standardized entry point for all message processing. Instead of each plugin calling `messageService.handleMessage()` directly, they can now use `elizaOS.sendMessage()` which provides:\r\n\r\n- Auto-filling of required fields\r\n- Connection verification before processing\r\n- Support for SYNC/ASYNC modes\r\n- Consistent error handling\r\n- Better observability\r\n\r\nThis improves maintainability and ensures all platforms benefit from future enhancements to the unified API.\r\n\r\n# Testing\r\n\r\n## Where should a reviewer start?\r\n\r\n1. Review the main change: `src/messages.ts` lines 331-345 - unified API integration\r\n2. Check service improvements: `src/service.ts` - cleaner initialization\r\n3. Verify logging: Debug logs show which path is used\r\n4. Check dependencies: `package.json` - updated core version\r\n\r\n**Test scenario:**\r\n```\r\nUser: @Bot What's up?\r\nBot: Fine, and you ?\r\n```\r\n\r\nLogs show:\r\n```\r\nInfo [Discord] Using unified messaging API\r\nInfo [MessageService] Message received from <user> in room <room>\r\nDebug [MessageService] Processing message: ...\r\n```\r\n\r\n## Deployment instructions\r\n\r\n1. Ensure `@elizaos/core` is updated to `^1.6.4` or later (includes unified API runtime reference)\r\n2. Rebuild plugin: `bun run build`\r\n3. Standard deployment process\r\n\r\n## Special note\r\n\r\nLater we will remove the fallback and clean many lines of code on discord-plugin\r\n\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n## Summary by CodeRabbit\n\n* **New Features**\n  * Channel management: allow/disallow channels and view allowed channel list.\n  * Fetch text channel members with optional caching.\n\n* **Improvements**\n  * Unified messaging path used when available, with fallback to previous path.\n  * More robust connection and message handling with clearer logging.\n\n* **Chores**\n  * Bumped version to 1.3.3.\n  * Updated core dependency to a newer compatible release.\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->",
      "repository": "elizaos-plugins/plugin-discord",
      "createdAt": "2025-11-03T14:56:35Z",
      "mergedAt": "2025-11-20T21:56:11Z",
      "additions": 50,
      "deletions": 39
    },
    {
      "id": "PR_kwDOOtXZkc60wxMn",
      "title": "Prevent sending empty discord messages",
      "author": "odilitime",
      "number": 25,
      "body": "Add a guard to the DM response handler to prevent sending empty messages to Discord.\n\n---\n<a href=\"https://cursor.com/background-agent?bcId=bc-5e41e093-31a5-4d05-b576-27f780c37ec0\"><picture><source media=\"(prefers-color-scheme: dark)\" srcset=\"https://cursor.com/open-in-cursor-dark.svg\"><source media=\"(prefers-color-scheme: light)\" srcset=\"https://cursor.com/open-in-cursor-light.svg\"><img alt=\"Open in Cursor\" src=\"https://cursor.com/open-in-cursor.svg\"></picture></a>&nbsp;<a href=\"https://cursor.com/agents?id=bc-5e41e093-31a5-4d05-b576-27f780c37ec0\"><picture><source media=\"(prefers-color-scheme: dark)\" srcset=\"https://cursor.com/open-in-web-dark.svg\"><source media=\"(prefers-color-scheme: light)\" srcset=\"https://cursor.com/open-in-web-light.svg\"><img alt=\"Open in Web\" src=\"https://cursor.com/open-in-web.svg\"></picture></a>\n\n<!-- CURSOR_SUMMARY -->\n---\n\n> [!NOTE]\n> Prevents sending empty Discord DMs by checking for non-whitespace text or attachments before sending.\n> \n> - **Discord Messaging (`src/messages.ts`)**:\n>   - **DM handling**: Add guard to skip sending when both `content.text` is empty/whitespace and no attachments; log a warning and return early.\n>   - Normalize text handling by using `textContent = content.text ?? ''` for DM `content` field.\n> \n> <sup>Written by [Cursor Bugbot](https://cursor.com/dashboard?tab=bugbot) for commit 54c15c3279b662c1903a913b8136a172b9de7edc. This will update automatically on new commits. Configure [here](https://cursor.com/dashboard?tab=bugbot).</sup>\n<!-- /CURSOR_SUMMARY -->",
      "repository": "elizaos-plugins/plugin-discord",
      "createdAt": "2025-11-21T06:46:51Z",
      "mergedAt": null,
      "additions": 8,
      "deletions": 1
    }
  ],
  "codeChanges": {
    "additions": 733,
    "deletions": 384,
    "files": 27,
    "commitCount": 23
  },
  "completedItems": [
    {
      "title": "Discord slash commands interface, modal interaction enhancements, attachment fixes",
      "prNumber": 23,
      "type": "bugfix",
      "body": "<!-- CURSOR_SUMMARY -->\n> [!NOTE]\n> Adds dynamic slash command registration and modal handling, enables sending attachments in DMs/channels, and improves message/interaction processing with new exports.\n> \n> - **Discord Service**:\n>   - Int",
      "files": [
        "src/index.ts",
        "src/messages.ts",
        "src/service.ts",
        "src/types.ts",
        "src/utils.ts",
        "src/voice.ts",
        "__tests__/discord-service.test.ts",
        "__tests__/environment.test.ts",
        "__tests__/messageManager.test.ts",
        "package.json",
        "src/actions/chatWithAttachments.ts",
        "src/actions/createPoll.ts",
        "src/actions/downloadMedia.ts",
        "src/actions/getUserInfo.ts",
        "src/actions/leaveChannel.ts",
        "src/actions/pinMessage.ts",
        "src/actions/reactToMessage.ts",
        "src/actions/searchMessages.ts",
        "src/actions/serverInfo.ts",
        "src/actions/summarizeConversation.ts",
        "src/actions/transcribeMedia.ts",
        "src/actions/unpinMessage.ts",
        "src/constants.ts",
        "tsconfig.build.json",
        "tsconfig.json",
        "tsconfig.test.json",
        "vitest.config.ts"
      ]
    },
    {
      "title": "feat: integrate unified messaging API",
      "prNumber": 24,
      "type": "feature",
      "body": "<!-- Use this template by filling in information and copying and pasting relevant items out of the HTML comments. -->\r\n\r\n# Relates to\r\n\r\nRelates to elizaOS/eliza#6095 and https://github.com/elizaOS/eliza/pull/6111 - Unified messaging API\r\n\r",
      "files": [
        "package.json",
        "src/messages.ts",
        "src/service.ts"
      ]
    }
  ],
  "topContributors": [
    {
      "username": "standujar",
      "avatarUrl": "https://avatars.githubusercontent.com/u/16385918?u=718bdcd1585be8447bdfffb8c11ce249baa7532d&v=4",
      "totalScore": 99.15835800199321,
      "prScore": 83.38035800199322,
      "issueScore": 0,
      "reviewScore": 15,
      "commentScore": 0.7779999999999999,
      "summary": null
    },
    {
      "username": "0xbbjoker",
      "avatarUrl": "https://avatars.githubusercontent.com/u/54844437?u=90fe1762420de6ad493a1c1582f1f70c0d87d8e2&v=4",
      "totalScore": 87.5518788239393,
      "prScore": 67.8518788239393,
      "issueScore": 0,
      "reviewScore": 19.5,
      "commentScore": 0.2,
      "summary": null
    },
    {
      "username": "odilitime",
      "avatarUrl": "https://avatars.githubusercontent.com/u/16395496?u=c9bac48e632aae594a0d85aaf9e9c9c69b674d8b&v=4",
      "totalScore": 50.71550658181175,
      "prScore": 40.815506581811746,
      "issueScore": 0,
      "reviewScore": 9.5,
      "commentScore": 0.4,
      "summary": null
    },
    {
      "username": "LinuxIsCool",
      "avatarUrl": "https://avatars.githubusercontent.com/u/31582215?u=b8eb5d3849bf877a3a0b686cf1632aca92e744ae&v=4",
      "totalScore": 23.88213122712422,
      "prScore": 23.68213122712422,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.2,
      "summary": null
    },
    {
      "username": "borisudovicic",
      "avatarUrl": "https://avatars.githubusercontent.com/u/31806472?u=8935f4d43fd7e4eb9bf5ff92d54d4d2f8ac8a786&v=4",
      "totalScore": 8,
      "prScore": 0,
      "issueScore": 8,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "skurzyp",
      "avatarUrl": "https://avatars.githubusercontent.com/u/98319381?v=4",
      "totalScore": 5,
      "prScore": 0,
      "issueScore": 0,
      "reviewScore": 5,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "devbrett90-prog",
      "avatarUrl": "https://avatars.githubusercontent.com/u/241853504?v=4",
      "totalScore": 4.5,
      "prScore": 0,
      "issueScore": 0,
      "reviewScore": 4.5,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "TommyVeit",
      "avatarUrl": "https://avatars.githubusercontent.com/u/244845549?v=4",
      "totalScore": 2,
      "prScore": 0,
      "issueScore": 2,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "870171594",
      "avatarUrl": "https://avatars.githubusercontent.com/u/216127669?u=d4669261a63be8c0bcb69c4e497ed51ecc07776e&v=4",
      "totalScore": 2,
      "prScore": 0,
      "issueScore": 2,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "nguyennk92",
      "avatarUrl": "https://avatars.githubusercontent.com/u/30664183?u=d6e579cd25d50bc8e9ec4928d95909d759b841db&v=4",
      "totalScore": 0.4,
      "prScore": 0,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.4,
      "summary": null
    },
    {
      "username": "otaku-x402",
      "avatarUrl": "https://avatars.githubusercontent.com/u/242004857?u=1325b26d380eec4a0b8d84e8e249c523eebd28dc&v=4",
      "totalScore": 0.2,
      "prScore": 0,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.2,
      "summary": null
    },
    {
      "username": "letmehateu",
      "avatarUrl": "https://avatars.githubusercontent.com/u/133153661?u=2217cec1ebd7bf22a8e4e3ace28b3183720dd444&v=4",
      "totalScore": 0.2,
      "prScore": 0,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.2,
      "summary": null
    }
  ],
  "newPRs": 1,
  "mergedPRs": 2,
  "newIssues": 0,
  "closedIssues": 0,
  "activeContributors": 6
}