{
  "interval": {
    "intervalStart": "2026-01-11T00:00:00.000Z",
    "intervalEnd": "2026-01-18T00:00:00.000Z",
    "intervalType": "week"
  },
  "repository": "elizaos-plugins/plugin-discord",
  "overview": "From 2026-01-11 to 2026-01-18, elizaos-plugins/plugin-discord had 1 new PRs (0 merged), 1 new issues, and 5 active contributors.",
  "topIssues": [
    {
      "id": "I_kwDOOtXZkc7jqxLy",
      "title": "this.runtime.elizaOS.sendMessage' is undefined - Discord not working with latest elizaos version",
      "author": "BinaryBluePeach",
      "number": 43,
      "repository": "elizaos-plugins/plugin-discord",
      "body": "Error handling message: 4888 |           return [];\n4889 |         }\n4890 |       };\n4891 |       if (this.runtime.hasElizaOS()) {\n4892 |         logger11.debug(\"[Discord] Using unified messaging API\");\n4893 |         await this.runtime.elizaOS.sendMessage(\n                                          ^\nTypeError: this.runtime.elizaOS.sendMessage is not a function. (In 'this.runtime.elizaOS.sendMessage(this.runtime.agentId, newMessage, {\n          onResponse: callback\n        })', 'this.runtime.elizaOS.sendMessage' is undefined)\n      at handleMessage ",
      "createdAt": "2026-01-15T23:37:35Z",
      "closedAt": null,
      "state": "OPEN",
      "commentCount": 1
    }
  ],
  "topPRs": [
    {
      "id": "PR_kwDOOtXZkc69C2PY",
      "title": "voice-pr: utilities & other fixes",
      "author": "odilitime",
      "number": 42,
      "body": "- Add missing DiscordService methods: buildMemoryFromMessage, setVoiceChannelStatus, clearActivity, setListeningActivity\r\n- Add voiceConnectionManager property for multi-bot support\r\n- Make buildStandardizedRooms/Users public for clientRegistry access\r\n- Add base64/local file attachment handling in messages.ts\r\n- Add updateLastMessage() and update-message.ts utility\r\n- Fix guild fetch type narrowing in joinChannel, sendDM, setVoiceChannelStatus\r\n- Fix unused variable in plugin-info.ts provider\r\n- Add *.d.ts to .gitignore (build artifacts)\r\n\n<!-- CURSOR_SUMMARY -->\n---\n\n> [!NOTE]\n> Minor housekeeping.\n> \n> - Bumps package version to `1.3.7` in `package.json`\n> - Adds `*.d.ts` and `*.tsbuildinfo` to `.gitignore` to exclude TypeScript build artifacts\n> \n> <sup>Written by [Cursor Bugbot](https://cursor.com/dashboard?tab=bugbot) for commit d618bd833ef952d6d159362dbc3c6a4feafaf79f. This will update automatically on new commits. Configure [here](https://cursor.com/dashboard?tab=bugbot).</sup>\n<!-- /CURSOR_SUMMARY -->\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\n\nThis PR extends the Discord plugin with voice/activity features and attachment handling improvements. Key changes include:\n\n- **New DiscordService methods**: `buildMemoryFromMessage`, `setVoiceChannelStatus`, `clearActivity`, `setListeningActivity` enable voice channel status updates and bot activity management\n- **Public API exposure**: `buildStandardizedRooms` and `buildStandardizedUsers` methods made public for multi-bot clientRegistry access\n- **Enhanced attachment support**: Added base64 data URL and local file path handling in messages.ts for sending images/files from memory\n- **Message update utility**: New `update-message.ts` utility and `updateLastMessage()` method enable editing previously sent messages\n- **Type safety fixes**: Added null checks before `isDiscordSnowflake()` calls in joinChannel, sendDM, and setVoiceChannelStatus actions\n- **Build configuration**: Added `*.d.ts` to .gitignore and improved tsconfig.build.json settings\n\n**Critical security concern**: The new local file path handling (lines 297-301, 340-344 in messages.ts) reads files without path validation, creating a path traversal vulnerability if `media.url` comes from untrusted sources.\n\n<h3>Confidence Score: 3/5</h3>\n\n\n- PR has path traversal vulnerabilities in attachment handling that need fixing before merge\n- Score reflects two critical path traversal issues in messages.ts where local file paths are read without validation (lines 297-301, 340-344). While the rest of the changes are solid improvements with proper null checks and clean implementations, these security vulnerabilities prevent a higher score. The type fixes, new utility functions, and API additions are well-implemented.\n- messages.ts requires immediate attention for path traversal vulnerabilities in local file attachment handling\n\n<h3>Important Files Changed</h3>\n\n\n\n\n| Filename | Overview |\n|----------|----------|\n| src/service.ts | Major refactor: adds public buildStandardizedRooms/Users methods, voiceConnectionManager property, and new service methods (buildMemoryFromMessage, setVoiceChannelStatus, clearActivity, setListeningActivity). Removes multi-bot infrastructure for simpler single-client approach. |\n| src/messages.ts | Adds base64 data URL and local file path handling for attachments, adds updateLastMessage() method with lastSentMessages tracking. Removes progressive message tracking system. |\n| src/update-message.ts | New utility file for updating Discord messages with proper event emission. Clean implementation with good error handling. |\n| src/actions/joinChannel.ts | Adds null check for messageServerId before isDiscordSnowflake check, fixing potential undefined access bug. Minor formatting cleanup. |\n| src/actions/sendDM.ts | Adds null check for messageServerId before isDiscordSnowflake check, preventing potential undefined access. |\n| src/actions/setVoiceChannelStatus.ts | Adds null check for messageServerId before isDiscordSnowflake check. Minor formatting cleanup. |\n\n</details>\n\n\n\n<h3>Sequence Diagram</h3>\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant DiscordAPI as Discord API\n    participant Service as DiscordService\n    participant MessageMgr as MessageManager\n    participant UpdateUtil as update-message.ts\n    participant Runtime as AgentRuntime\n    \n    Note over Service: Initialization\n    Service->>Service: Constructor creates client\n    Service->>MessageMgr: new MessageManager(this)\n    Service->>Service: voiceConnectionManager (optional)\n    Service->>DiscordAPI: client.login()\n    DiscordAPI-->>Service: ClientReady event\n    Service->>Service: onReady() - buildStandardizedRooms/Users\n    \n    Note over User,Runtime: Message Flow\n    User->>DiscordAPI: Send message\n    DiscordAPI->>Service: messageCreate event\n    Service->>MessageMgr: handleMessage()\n    MessageMgr->>MessageMgr: Process attachments (base64/local files)\n    MessageMgr->>Runtime: messageService.handleMessage()\n    Runtime-->>MessageMgr: callback with content\n    MessageMgr->>MessageMgr: Handle base64/local file attachments\n    MessageMgr->>DiscordAPI: send message chunks\n    DiscordAPI-->>MessageMgr: Discord messages\n    MessageMgr->>MessageMgr: Store in lastSentMessages Map\n    MessageMgr->>Runtime: createMemory()\n    \n    Note over MessageMgr,UpdateUtil: Message Update Flow\n    Runtime->>MessageMgr: updateLastMessage(roomId, content)\n    MessageMgr->>MessageMgr: Get from lastSentMessages Map\n    MessageMgr->>UpdateUtil: updateDiscordMessages()\n    UpdateUtil->>DiscordAPI: message.edit() for each chunk\n    UpdateUtil->>Runtime: emitEvent(MESSAGE_UPDATED)\n    \n    Note over Service,DiscordAPI: Voice/Activity Methods\n    Runtime->>Service: setVoiceChannelStatus(channelId, status)\n    Service->>DiscordAPI: channel.setStatus()\n    Runtime->>Service: setListeningActivity(text)\n    Service->>DiscordAPI: client.user.setActivity()\n    Runtime->>Service: clearActivity()\n    Service->>DiscordAPI: client.user.setActivity(null)\n```\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "repository": "elizaos-plugins/plugin-discord",
      "createdAt": "2026-01-14T00:15:24Z",
      "mergedAt": null,
      "additions": 3,
      "deletions": 1
    }
  ],
  "codeChanges": {
    "additions": 0,
    "deletions": 0,
    "files": 0,
    "commitCount": 1
  },
  "completedItems": [],
  "topContributors": [
    {
      "username": "YuriNachos",
      "avatarUrl": "https://avatars.githubusercontent.com/u/19365375?u=35202bfa8350f028db180527a789e8dcb7576d42&v=4",
      "totalScore": 249.18435236903713,
      "prScore": 248.98435236903714,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.2,
      "summary": null
    },
    {
      "username": "0xbbjoker",
      "avatarUrl": "https://avatars.githubusercontent.com/u/54844437?u=90fe1762420de6ad493a1c1582f1f70c0d87d8e2&v=4",
      "totalScore": 194.3157188721635,
      "prScore": 175.8157188721635,
      "issueScore": 0,
      "reviewScore": 18.5,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "standujar",
      "avatarUrl": "https://avatars.githubusercontent.com/u/16385918?u=718bdcd1585be8447bdfffb8c11ce249baa7532d&v=4",
      "totalScore": 143.72624857530687,
      "prScore": 90.82624857530686,
      "issueScore": 0,
      "reviewScore": 52.5,
      "commentScore": 0.4,
      "summary": null
    },
    {
      "username": "greptile-apps",
      "avatarUrl": "https://avatars.githubusercontent.com/in/867647?v=4",
      "totalScore": 127.038,
      "prScore": 0,
      "issueScore": 0,
      "reviewScore": 126,
      "commentScore": 1.038,
      "summary": null
    },
    {
      "username": "odilitime",
      "avatarUrl": "https://avatars.githubusercontent.com/u/16395496?u=c9bac48e632aae594a0d85aaf9e9c9c69b674d8b&v=4",
      "totalScore": 75.9912118090102,
      "prScore": 75.1532118090102,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.838,
      "summary": null
    },
    {
      "username": "1bcMax",
      "avatarUrl": "https://avatars.githubusercontent.com/u/195689928?u=85f5178dd043e3d408b42cb5685e65806d723b1a&v=4",
      "totalScore": 63.23034748685607,
      "prScore": 62.89034748685607,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.33999999999999997,
      "summary": null
    },
    {
      "username": "madjin",
      "avatarUrl": "https://avatars.githubusercontent.com/u/32600939?u=cdcf89f44c7a50906c7a80d889efa85023af2049&v=4",
      "totalScore": 48.50426433794567,
      "prScore": 45.726264337945665,
      "issueScore": 2,
      "reviewScore": 0,
      "commentScore": 0.7779999999999999,
      "summary": null
    },
    {
      "username": "revlentless",
      "avatarUrl": "https://avatars.githubusercontent.com/u/215957173?v=4",
      "totalScore": 43.5437738965761,
      "prScore": 43.5437738965761,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "wtfsayo",
      "avatarUrl": "https://avatars.githubusercontent.com/u/82053242?u=98209a1f10456f42d4d2fa71db4d5bf4a672cbc3&v=4",
      "totalScore": 37.67401817810962,
      "prScore": 37.47401817810962,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.2,
      "summary": null
    },
    {
      "username": "thewoweffect",
      "avatarUrl": "https://avatars.githubusercontent.com/u/113222443?u=cb21d15b0ce815d0f68167f2eca236aad6c64598&v=4",
      "totalScore": 4.4,
      "prScore": 0,
      "issueScore": 4.2,
      "reviewScore": 0,
      "commentScore": 0.2,
      "summary": null
    },
    {
      "username": "borisudovicic",
      "avatarUrl": "https://avatars.githubusercontent.com/u/31806472?u=8935f4d43fd7e4eb9bf5ff92d54d4d2f8ac8a786&v=4",
      "totalScore": 4,
      "prScore": 0,
      "issueScore": 4,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "Xayaan",
      "avatarUrl": "https://avatars.githubusercontent.com/u/5237930?u=7840b286463bde982c8af8f389e61e26a01328cb&v=4",
      "totalScore": 4,
      "prScore": 0,
      "issueScore": 4,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "Zenobow",
      "avatarUrl": "https://avatars.githubusercontent.com/u/255418143?v=4",
      "totalScore": 2.1,
      "prScore": 0,
      "issueScore": 2.1,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "tdnupe3",
      "avatarUrl": "https://avatars.githubusercontent.com/u/25161668?u=94680b6bcbcfce954c7a9dd09d667a3919953041&v=4",
      "totalScore": 2,
      "prScore": 0,
      "issueScore": 2,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "metatev",
      "avatarUrl": "https://avatars.githubusercontent.com/u/26566294?u=a0604d1f9f7a7936e350643ffccaef1f2a808fad&v=4",
      "totalScore": 2,
      "prScore": 0,
      "issueScore": 2,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "BinaryBluePeach",
      "avatarUrl": "https://avatars.githubusercontent.com/u/192237769?v=4",
      "totalScore": 2,
      "prScore": 0,
      "issueScore": 2,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    }
  ],
  "newPRs": 1,
  "mergedPRs": 0,
  "newIssues": 1,
  "closedIssues": 0,
  "activeContributors": 5
}