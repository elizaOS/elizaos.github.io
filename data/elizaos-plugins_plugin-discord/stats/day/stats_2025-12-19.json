{
  "interval": {
    "intervalStart": "2025-12-19T00:00:00.000Z",
    "intervalEnd": "2025-12-20T00:00:00.000Z",
    "intervalType": "day"
  },
  "repository": "elizaos-plugins/plugin-discord",
  "overview": "From 2025-12-19 to 2025-12-20, elizaos-plugins/plugin-discord had 1 new PRs (2 merged), 0 new issues, and 1 active contributors.",
  "topIssues": [],
  "topPRs": [
    {
      "id": "PR_kwDOOtXZkc61vxX1",
      "title": "Slash command permissions",
      "author": "odilitime",
      "number": 29,
      "body": "<!-- CURSOR_SUMMARY -->\n> [!NOTE]\n> Adds hybrid slash-command permissions (Discord perms, channel-whitelist bypass, custom validators) and a safer command registration pipeline; fixes DM channel handling.\n> \n> - **Discord Slash Commands**:\n>   - **Hybrid permissions**: `guildOnly`, `requiredPermissions`, `contexts`, `bypassChannelWhitelist`, `validator`, `guildIds` on `DiscordSlashCommand`.\n>   - **Runtime checks**: Channel whitelist enforcement with per-command bypass and 15‚Äëmin channel bypass for follow-ups; async custom validator layer.\n>   - **Registration pipeline**: Dedup/merge commands, transform to Discord API shape, register globally or per‚Äëguild, queue to avoid races, BigInt-safe logging.\n> - **Interaction Handling**:\n>   - Detailed debug logs; safe default replies on validator failure/errors.\n> - **Fixes/Cleanup**:\n>   - Correct DM channel creation (`user.dmChannel` vs promise) and BigInt-safe error serialization.\n>   - Clear bypass timeouts on service stop.\n> - **Docs**:\n>   - README section documenting permission layers, options, examples, and rationale.\n> \n> <sup>Written by [Cursor Bugbot](https://cursor.com/dashboard?tab=bugbot) for commit 60d9a4fdee609c648ddb85529153d70328f49962. This will update automatically on new commits. Configure [here](https://cursor.com/dashboard?tab=bugbot).</sup>\n<!-- /CURSOR_SUMMARY -->\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n## Summary by CodeRabbit\n\n* **New Features**\n  * Hybrid permission system for slash commands: Discord checks, channel whitelist with temporary bypasses for follow-ups, and async per-command validators.\n  * Per-command options: guild-only, guild targeting, required permissions, bypass channel whitelist; improved registration merging and per-guild upsert flow.\n  * Automatic expiry and cleanup of channel bypass state; enhanced logging and registration feedback.\n\n* **Bug Fixes**\n  * Fixed DM channel retrieval and BigInt-safe serialization in error reporting.\n\n* **Documentation**\n  * Added comprehensive \"Slash Command Permissions\" guide with examples, option table, and rationale.\n\n<sub>‚úèÔ∏è Tip: You can customize this high-level summary in your review settings.</sub>\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->",
      "repository": "elizaos-plugins/plugin-discord",
      "createdAt": "2025-11-26T23:30:52Z",
      "mergedAt": "2025-12-19T03:32:39Z",
      "additions": 959,
      "deletions": 174
    },
    {
      "id": "PR_kwDOOtXZkc65vaKh",
      "title": "feat(discord): add tiered permission system for bot invite URLs",
      "author": "odilitime",
      "number": 33,
      "body": "Add a 3x2 permission matrix for Discord bot invites:\r\n- Role levels: Basic / Moderator / Admin\r\n- Voice options: With Voice / Without Voice\r\n\r\nChanges:\r\n- Add src/permissions.ts with centralized permission tier definitions\r\n- Enhance banner.ts with tiered invite URL display (üéôÔ∏è/üí¨ sections)\r\n- Update index.ts to use new banner with all settings displayed\r\n- Refactor service.ts to use generateInviteUrl() instead of inline perms\r\n- Add extraMetadata to buildMemoryFromMessage for cross-agent filtering\r\n- Fix channelState/voiceState providers to handle both channelId and serverId\r\n- Export permission utilities (DiscordPermissionTiers, generateInviteUrl, etc)\r\n\r\nPermission tiers:\r\n- Basic: text chat, reactions, embeds, threads, slash commands\r\n- Moderator: + manage messages, mention everyone, polls, timeout\r\n- Admin: + kick/ban, manage channels/roles/webhooks\r\n- Voice addon: connect, speak, VAD, priority speaker, stream\n\n<!-- CURSOR_SUMMARY -->\n---\n\n> [!NOTE]\n> Adds a centralized 3x2 Discord permission tier system with generated invite URLs, overhauls the settings banner, and updates actions/services to use new server ID handling and richer metadata.\n> \n> - **Permissions/Invites**:\n>   - Add `src/permissions.ts` with 3x2 tiers (Basic/Moderator/Admin √ó Voice/No Voice) and helpers (`generateInviteUrl`, `generateAllInviteUrls`, `getPermissionValues`).\n>   - Replace inline permission math in `service.ts` with `generateInviteUrl('MODERATOR_VOICE')`; log invite URL and audit-log note.\n>   - Export permission utilities from `index.ts`.\n> - **Banner/UI**:\n>   - Replace legacy banner with `printBanner` in `banner.ts` (ANSI overhaul, settings table, tiered invite links); keep `printDiscordBanner` for compatibility.\n>   - Use new banner in `index.ts` and show all Discord settings.\n> - **Actions/Server handling**:\n>   - Use `room.messageServerId` fallback where applicable and fetch guild by resolved `serverId` in `getUserInfo`, `readChannel`, `searchMessages`, `serverInfo`.\n>   - Improve `serverInfo` formatting (localized counts, sticker count).\n> - **Messaging/Metadata**:\n>   - Allow `extraMetadata` in `buildMemoryFromMessage` (`types.ts`), add reply attribution (`replyToAuthor`) and raw Discord IDs (`discordMessageId`, `discordChannelId`, `discordServerId`) in `messages.ts`/`service.ts`.\n>   - `utils.sendMessageInChunks`: thread replies on first chunk; retry without reply if reference is invalid.\n> - **Providers/Logging**:\n>   - `voiceStateProvider`: include `roomType` in values when not in voice.\n>   - Large-guild logs use localized member counts.\n> \n> <sup>Written by [Cursor Bugbot](https://cursor.com/dashboard?tab=bugbot) for commit 218d3c3da21d05e7fd691a4a852a9ba6d4e30c9c. This will update automatically on new commits. Configure [here](https://cursor.com/dashboard?tab=bugbot).</sup>\n<!-- /CURSOR_SUMMARY -->\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n## Summary by CodeRabbit\n\n* **New Features**\n  * Tiered Discord permission presets and enhanced invite URL generation.\n  * Expanded startup banner showing settings and invite matrix.\n  * Message metadata now captures replied-to author for cross-agent filtering.\n\n* **Improvements**\n  * Locale-aware number formatting for counts.\n  * Better server identification with fallback.\n  * Added Discord IDs to memory for improved cross-entity correlation.\n  * Automatic retry fallback when a reply reference is no longer valid.\n\n<sub>‚úèÔ∏è Tip: You can customize this high-level summary in your review settings.</sub>\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->",
      "repository": "elizaos-plugins/plugin-discord",
      "createdAt": "2025-12-19T03:50:48Z",
      "mergedAt": "2025-12-19T05:00:10Z",
      "additions": 660,
      "deletions": 107
    }
  ],
  "codeChanges": {
    "additions": 1619,
    "deletions": 281,
    "files": 13,
    "commitCount": 19
  },
  "completedItems": [
    {
      "title": "Slash command permissions",
      "prNumber": 29,
      "type": "other",
      "body": "<!-- CURSOR_SUMMARY -->\n> [!NOTE]\n> Adds hybrid slash-command permissions (Discord perms, channel-whitelist bypass, custom validators) and a safer command registration pipeline; fixes DM channel handling.\n> \n> - **Discord Slash Commands**:\n",
      "files": [
        "README.md",
        "src/service.ts",
        "src/types.ts"
      ]
    },
    {
      "title": "feat(discord): add tiered permission system for bot invite URLs",
      "prNumber": 33,
      "type": "feature",
      "body": "Add a 3x2 permission matrix for Discord bot invites:\r\n- Role levels: Basic / Moderator / Admin\r\n- Voice options: With Voice / Without Voice\r\n\r\nChanges:\r\n- Add src/permissions.ts with centralized permission tier definitions\r\n- Enhance banner",
      "files": [
        "src/actions/getUserInfo.ts",
        "src/actions/readChannel.ts",
        "src/actions/searchMessages.ts",
        "src/actions/serverInfo.ts",
        "src/banner.ts",
        "src/index.ts",
        "src/messages.ts",
        "src/permissions.ts",
        "src/providers/voiceState.ts",
        "src/service.ts",
        "src/types.ts",
        "src/utils.ts"
      ]
    }
  ],
  "topContributors": [
    {
      "username": "madjin",
      "avatarUrl": "https://avatars.githubusercontent.com/u/32600939?u=cdcf89f44c7a50906c7a80d889efa85023af2049&v=4",
      "totalScore": 95.9430470703488,
      "prScore": 91.2050470703488,
      "issueScore": 4.3,
      "reviewScore": 0,
      "commentScore": 0.43799999999999994,
      "summary": "madjin: Focused on enhancing the `elizaos.github.io` repository by implementing new static JSON API endpoints for summaries and leaderboards, as evidenced by merged PRs #186 (+966/-412 lines) and #184 (+402/-0 lines), while also contributing to other work, bug fixes, and feature development across 35 files."
    },
    {
      "username": "odilitime",
      "avatarUrl": "https://avatars.githubusercontent.com/u/16395496?u=c9bac48e632aae594a0d85aaf9e9c9c69b674d8b&v=4",
      "totalScore": 63.21894866573836,
      "prScore": 63.21894866573836,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": "odilitime: Focused on feature development, successfully merging PR elizaos-plugins/plugin-discord#33 which added a tiered permission system for bot invite URLs, demonstrating a primary focus on bugfix work, other work, and feature work across 81 files."
    },
    {
      "username": "wtfsayo",
      "avatarUrl": "https://avatars.githubusercontent.com/u/82053242?u=98209a1f10456f42d4d2fa71db4d5bf4a672cbc3&v=4",
      "totalScore": 29.54725378073324,
      "prScore": 29.34725378073324,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.2,
      "summary": "wtfsayo: Focused on enhancing the registry's robustness by merging PR elizaos-plugins/registry#244, which introduced detection and fixes for version/core dependency mismatches, contributing to bugfix and other work across 2 files with 2 commits."
    }
  ],
  "newPRs": 1,
  "mergedPRs": 2,
  "newIssues": 0,
  "closedIssues": 0,
  "activeContributors": 1
}