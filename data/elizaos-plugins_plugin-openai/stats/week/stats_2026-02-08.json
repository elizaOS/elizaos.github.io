{
  "interval": {
    "intervalStart": "2026-02-08T00:00:00.000Z",
    "intervalEnd": "2026-02-15T00:00:00.000Z",
    "intervalType": "week"
  },
  "repository": "elizaos-plugins/plugin-openai",
  "overview": "From 2026-02-08 to 2026-02-15, elizaos-plugins/plugin-openai had 1 new PRs (1 merged), 0 new issues, and 4 active contributors.",
  "topIssues": [],
  "topPRs": [
    {
      "id": "PR_kwDON0mV_87D1Sql",
      "title": "feat(plugin-openai): add rate limiter, improve embeddings, and update…",
      "author": "odilitime",
      "number": 24,
      "body": "… types\r\n\r\nAdd rate-limiter utility with per-endpoint backoff and retry logic. Improve embedding handler with better error handling and fallback support. Refactor init, audio, image, object, and text model handlers for @elizaos/core API compatibility. Expand types and add banner. Update README with comprehensive documentation.\n\n<!-- CURSOR_SUMMARY -->\n---\n\n> [!NOTE]\n> **Medium Risk**\n> Touches all OpenAI model call paths and introduces new retry/throttling and 429 classification logic, which could impact latency and error handling behavior under load. Startup behavior and TypeScript typing are also changed, but mostly in a controlled, additive way.\n> \n> **Overview**\n> Adds a new process-wide rate limiter (`withRateLimit`/`acquireRateLimit`) with per-category sliding-window throttling, exponential backoff using `Retry-After`, one-shot tier logging, and **fail-fast billing/quota 429 detection** via `QuotaExceededError`.\n> \n> Updates embeddings/images/audio/object/text handlers to use the limiter and to `await throwIfRateLimited()` for typed 429 handling; embeddings also gain synthetic fast-paths (null/empty/`\"test\"`) to avoid startup probe API calls and return fallback vectors on dimension mismatch.\n> \n> Changes plugin init to be non-blocking and purely synchronous (removes eager `GET /models` validation), adds a startup config banner (`src/banner.ts`), introduces local core-compat streaming shims (`StreamingTextParams`/`TextStreamResult`), DRYs model registration with a `Plugin[\"models\"]` type assertion, switches `@elizaos/core` dependency to `workspace:*`, and expands docs with a new `CHANGELOG.md` and README sections for banner/rate limiting/compatibility.\n> \n> <sup>Written by [Cursor Bugbot](https://cursor.com/dashboard?tab=bugbot) for commit 7542c671110256a1e1b24627b90870f414fd9b92. This will update automatically on new commits. Configure [here](https://cursor.com/dashboard?tab=bugbot).</sup>\n<!-- /CURSOR_SUMMARY -->\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n\n## Summary by CodeRabbit\n\n* **New Features**\n  * Startup banner displaying API key status, base URL, and models\n  * Automatic account tier detection on first API call\n  * Built-in rate limiting with automatic retries and exponential backoff\n  * Billing quota error detection with direct dashboard link\n  * Optimized embeddings to avoid unnecessary API calls\n\n* **Bug Fixes**\n  * Faster startup by removing unnecessary API validation\n\n* **Documentation**\n  * Expanded README with rate limiting details, billing handling, configuration options, examples, and architecture overview\n\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->\n\n<!-- greptile_comment -->\n\n<h2>Greptile Overview</h2>\n\n<h3>Greptile Summary</h3>\n\nThis PR adds a comprehensive rate limiting system to prevent 429 errors from OpenAI's API and improves model handlers with better error handling and caching.\n\n**Major Changes:**\n- New sliding-window rate limiter with per-category tracking (embeddings, chat, images, audio) and exponential backoff with automatic retry logic\n- Removed eager API validation during initialization to prevent race conditions with embedding dimension probes\n- Enhanced embedding handler with synthetic vectors for test probes, avoiding unnecessary API calls during startup\n- Added persistent caching for image descriptions and transcriptions with content-based hashing\n- Refactored all model handlers to use rate limiting wrapper with quota detection\n- Added forward-compatibility type shims for streaming support across `@elizaos/core` versions\n- New startup banner displaying configuration status\n\n**Technical Highlights:**\n- Rate limiter uses module-level singleton pattern to preserve state across agent reinitializations\n- Image description caching includes ETag/Last-Modified headers for content-aware cache keys\n- Transcription caching uses optimized blob sampling (start/middle/end slices) to minimize memory usage\n- Quota exhaustion (billing) errors are distinguished from transient rate limit errors to fail fast\n- Comprehensive documentation with detailed rationale comments throughout\n\n<h3>Confidence Score: 4/5</h3>\n\n- Safe to merge with one minor logic issue in rate-limiter retry-after header parsing\n- Comprehensive implementation with excellent documentation and clear architectural decisions. One minor bug in `retry-after` header parsing that could pass NaN to backoff logic. All other code is well-structured with proper error handling, caching strategies, and type safety\n- Pay attention to `src/utils/rate-limiter.ts:338` - the retry-after header parsing needs the parentheses fix to handle invalid header values correctly\n\n<h3>Important Files Changed</h3>\n\n\n\n\n| Filename | Overview |\n|----------|----------|\n| src/utils/rate-limiter.ts | New rate limiter with sliding window, exponential backoff, and per-category tracking. Well-documented implementation with quota detection. |\n| src/models/embedding.ts | Enhanced with rate limiting and improved error handling. Synthetic embeddings for test probes avoid unnecessary API calls. |\n| src/models/image.ts | Added rate limiting, caching with content-aware keys, and size validation. Comprehensive error handling for image operations. |\n| src/models/text.ts | Refactored to use rate limiter with different strategies for streaming vs non-streaming calls. Clean implementation. |\n| src/models/audio.ts | Added transcription caching with content-based hashing and rate limiting. Efficient blob sampling for cache keys. |\n| src/init.ts | Removed eager API validation to avoid startup race conditions. Synchronous config validation only. |\n\n</details>\n\n\n\n<h3>Flowchart</h3>\n\n```mermaid\nflowchart TD\n    Start[API Call Request] --> CheckCategory{Determine Category<br/>chat/embeddings/images/audio}\n    CheckCategory --> AcquireSlot[Acquire Rate Limit Slot]\n    \n    AcquireSlot --> CheckBackoff{Active Backoff?}\n    CheckBackoff -->|Yes| WaitBackoff[Wait for Backoff]\n    CheckBackoff -->|No| CheckWindow{Within RPM Limit?}\n    \n    WaitBackoff --> CheckWindow\n    CheckWindow -->|No| WaitWindow[Wait for Window Slot]\n    CheckWindow -->|Yes| RecordRequest[Record Request Timestamp]\n    \n    WaitWindow --> RecordRequest\n    RecordRequest --> MakeCall[Execute API Call]\n    \n    MakeCall --> CheckResponse{Response Status}\n    CheckResponse -->|200 OK| Success[Return Result]\n    CheckResponse -->|429 Quota| QuotaError[Throw QuotaExceededError<br/>No Retry]\n    CheckResponse -->|429 Rate Limit| RateError{Retries Left?}\n    CheckResponse -->|Other Error| OtherError[Throw Error]\n    \n    RateError -->|Yes| RecordBackoff[Record Backoff Deadline<br/>Exponential + Jitter]\n    RateError -->|No| MaxRetries[Throw Max Retries Error]\n    \n    RecordBackoff --> Sleep[Sleep with Backoff]\n    Sleep --> AcquireSlot\n    \n    Success --> End[Complete]\n    QuotaError --> End\n    OtherError --> End\n    MaxRetries --> End\n```\n\n<sub>Last reviewed commit: 7542c67</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "repository": "elizaos-plugins/plugin-openai",
      "createdAt": "2026-02-14T22:30:12Z",
      "mergedAt": null,
      "additions": 1360,
      "deletions": 422
    },
    {
      "id": "PR_kwDON0mV_867CDAd",
      "title": "feat: fix image description + add caching to audio and image handlers",
      "author": "odilitime",
      "number": 23,
      "body": "<!-- CURSOR_SUMMARY -->\n> [!NOTE]\n> Introduces persistent, database-backed caching to reduce duplicate OpenAI calls and latency.\n> \n> - `audio.ts` `handleTranscription`: content-based cache keys (slice-hashed blobs + params), best-effort get/set, and detailed debug logs\n> - `image.ts` `handleImageDescription`: URL/ETag/Last-Modified-based cache (default prompts only), consolidated `HEAD` request with 2s timeout, and >20MB size rejection with user-facing message\n> - Uses `max_completion_tokens` for newer models (`gpt-5`/`o1`/`o3`) while keeping `max_tokens` fallback\n> - Improved error parsing/logging with response body capture; cache failures are non-blocking\n> - No behavioral change to image generation; TTS helper unchanged aside from plumbing\n> \n> <sup>Written by [Cursor Bugbot](https://cursor.com/dashboard?tab=bugbot) for commit 07c22e3c25b5693ad4884229397042cd687b34ae. This will update automatically on new commits. Configure [here](https://cursor.com/dashboard?tab=bugbot).</sup>\n<!-- /CURSOR_SUMMARY -->\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n## Summary by CodeRabbit\n\n* **New Features**\n  * Persistent, content-aware caching for transcriptions and image descriptions (content hashing, header-based keys, URL fallbacks); cache persists across restarts and instances.\n* **Bug Fixes**\n  * Image size validation (~20MB) with clear user-facing errors; improved API error parsing and more descriptive error responses.\n  * Correct token parameter selection for newer model families.\n* **Chores**\n  * Best-effort cache behavior and enhanced debug logging; consolidated pre-checks for image requests.\n\n<sub>✏️ Tip: You can customize this high-level summary in your review settings.</sub>\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\n\nThis PR adds persistent database-backed caching to the audio transcription and image description handlers to optimize for Discord bots and other services that frequently process the same media files. The implementation includes:\n\n**Audio transcriptions (`audio.ts`)**:\n- Content-based caching using SHA-256 hashing (with fallback) to identify duplicate audio regardless of URL\n- Reads audio buffer once for both cache check and API call to avoid redundant I/O\n- Best-effort caching that doesn't block requests on cache failures\n\n**Image descriptions (`image.ts`)**:\n- URL-based caching for default prompts only (custom prompts bypass cache)\n- Image size validation via HEAD request to fail fast on oversized images (>20MB)\n- Support for newer model token parameters (`max_completion_tokens` for gpt-5/o1/o3 series)\n- Enhanced error handling with detailed error response logging\n\nBoth handlers follow a consistent pattern: check cache first, log appropriately, make API call if needed, cache successful results. The caching is designed to be non-intrusive with comprehensive logging for debugging.\n\n<h3>Confidence Score: 4/5</h3>\n\n\n- This PR is safe to merge with minimal risk - well-designed caching implementation with proper error handling\n- Score reflects solid architecture and error handling, but there's a minor cache collision risk in image.ts where different images at the same URL could be cached incorrectly if image content changes without URL change\n- Pay attention to `src/models/image.ts` - the URL-based caching could cause issues if image content at a URL changes without the URL changing\n\n<h3>Important Files Changed</h3>\n\n\n\n\n| Filename | Overview |\n|----------|----------|\n| src/models/audio.ts | Added content-based caching for transcriptions with robust SHA-256 hashing and fallback. Well-designed with proper error handling and detailed documentation. |\n| src/models/image.ts | Added URL-based caching, size validation, improved error handling, and max_completion_tokens support for newer models. Minor cache collision risk with URL-only keys. |\n\n</details>\n\n\n\n<h3>Sequence Diagram</h3>\n\n```mermaid\nsequenceDiagram\n    participant Client\n    participant Handler as Audio/Image Handler\n    participant Cache as Database Cache\n    participant OpenAI as OpenAI API\n\n    Client->>Handler: Request transcription/description\n    Handler->>Handler: Prepare media (hash audio/extract URL)\n    Handler->>Cache: Check cache with key\n    alt Cache HIT\n        Cache-->>Handler: Return cached result\n        Handler-->>Client: Return result (fast path)\n    else Cache MISS\n        Cache-->>Handler: No cached result\n        Handler->>OpenAI: API request with media\n        OpenAI-->>Handler: API response\n        Handler->>Cache: Store result (best-effort)\n        alt Cache write succeeds\n            Cache-->>Handler: Write confirmed\n        else Cache write fails\n            Cache-->>Handler: Write failed (logged, non-blocking)\n        end\n        Handler-->>Client: Return result\n    end\n```\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "repository": "elizaos-plugins/plugin-openai",
      "createdAt": "2025-12-30T21:44:22Z",
      "mergedAt": "2026-02-08T18:15:51Z",
      "additions": 408,
      "deletions": 7
    }
  ],
  "codeChanges": {
    "additions": 408,
    "deletions": 7,
    "files": 3,
    "commitCount": 2
  },
  "completedItems": [
    {
      "title": "feat: fix image description + add caching to audio and image handlers",
      "prNumber": 23,
      "type": "feature",
      "body": "<!-- CURSOR_SUMMARY -->\n> [!NOTE]\n> Introduces persistent, database-backed caching to reduce duplicate OpenAI calls and latency.\n> \n> - `audio.ts` `handleTranscription`: content-based cache keys (slice-hashed blobs + params), best-effort ge",
      "files": [
        "src/models/audio.ts",
        "src/models/image.ts",
        "package.json"
      ]
    }
  ],
  "topContributors": [
    {
      "username": "lalalune",
      "avatarUrl": "https://avatars.githubusercontent.com/u/18633264?u=e2e906c3712c2506ebfa98df01c2cfdc50050b30&v=4",
      "totalScore": 288.52580791948094,
      "prScore": 288.08780791948095,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.43799999999999994,
      "summary": null
    },
    {
      "username": "odilitime",
      "avatarUrl": "https://avatars.githubusercontent.com/u/16395496?u=c9bac48e632aae594a0d85aaf9e9c9c69b674d8b&v=4",
      "totalScore": 266.8186132248019,
      "prScore": 266.8186132248019,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "h1-hunt",
      "avatarUrl": "https://avatars.githubusercontent.com/u/260165794?u=73efc04d5c05a1af9903686d9bb90265cc06ab45&v=4",
      "totalScore": 135.1498814312321,
      "prScore": 121.2118814312321,
      "issueScore": 0,
      "reviewScore": 13.5,
      "commentScore": 0.43799999999999994,
      "summary": null
    },
    {
      "username": "standujar",
      "avatarUrl": "https://avatars.githubusercontent.com/u/16385918?u=718bdcd1585be8447bdfffb8c11ce249baa7532d&v=4",
      "totalScore": 103.16179582652337,
      "prScore": 103.16179582652337,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "greptile-apps",
      "avatarUrl": "https://avatars.githubusercontent.com/in/867647?v=4",
      "totalScore": 95.44,
      "prScore": 0,
      "issueScore": 0,
      "reviewScore": 94.5,
      "commentScore": 0.94,
      "summary": null
    },
    {
      "username": "2-A-M",
      "avatarUrl": "https://avatars.githubusercontent.com/u/96268540?u=b7d92c0e2a91af580d09eeae862eef576955ab8a&v=4",
      "totalScore": 36.63501911726088,
      "prScore": 36.63501911726088,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "0xbbjoker",
      "avatarUrl": "https://avatars.githubusercontent.com/u/54844437?u=90fe1762420de6ad493a1c1582f1f70c0d87d8e2&v=4",
      "totalScore": 34.50239650691849,
      "prScore": 34.50239650691849,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "mcp97",
      "avatarUrl": "https://avatars.githubusercontent.com/u/15067321?v=4",
      "totalScore": 21.901026915173976,
      "prScore": 21.901026915173976,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "a692570",
      "avatarUrl": "https://avatars.githubusercontent.com/u/182830946?u=fbc711137880cd843fea4b3b9f00013d07d40fd6&v=4",
      "totalScore": 10.997573590279972,
      "prScore": 10.997573590279972,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "lawyered0",
      "avatarUrl": "https://avatars.githubusercontent.com/u/4802498?u=f45773fb7440d77e5c12ea1560122dd6d26632eb&v=4",
      "totalScore": 10.40435169073515,
      "prScore": 10.40435169073515,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "borisudovicic",
      "avatarUrl": "https://avatars.githubusercontent.com/u/31806472?u=8935f4d43fd7e4eb9bf5ff92d54d4d2f8ac8a786&v=4",
      "totalScore": 4,
      "prScore": 0,
      "issueScore": 4,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "aite550659-max",
      "avatarUrl": "https://avatars.githubusercontent.com/u/258900948?v=4",
      "totalScore": 4,
      "prScore": 0,
      "issueScore": 4,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "thewoweffect",
      "avatarUrl": "https://avatars.githubusercontent.com/u/113222443?u=cb21d15b0ce815d0f68167f2eca236aad6c64598&v=4",
      "totalScore": 2.3000000000000003,
      "prScore": 0,
      "issueScore": 2.1,
      "reviewScore": 0,
      "commentScore": 0.2,
      "summary": null
    },
    {
      "username": "coolRoger",
      "avatarUrl": "https://avatars.githubusercontent.com/u/33861624?u=ae40d02de875befc512751127f1082a22b464264&v=4",
      "totalScore": 2,
      "prScore": 0,
      "issueScore": 2,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "tdnupe3",
      "avatarUrl": "https://avatars.githubusercontent.com/u/25161668?u=94680b6bcbcfce954c7a9dd09d667a3919953041&v=4",
      "totalScore": 0.2,
      "prScore": 0,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.2,
      "summary": null
    }
  ],
  "newPRs": 1,
  "mergedPRs": 1,
  "newIssues": 0,
  "closedIssues": 0,
  "activeContributors": 4
}