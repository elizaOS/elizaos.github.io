{
  "interval": {
    "intervalStart": "2025-12-28T00:00:00.000Z",
    "intervalEnd": "2026-01-04T00:00:00.000Z",
    "intervalType": "week"
  },
  "repository": "elizaos-plugins/plugin-openai",
  "overview": "From 2025-12-28 to 2026-01-04, elizaos-plugins/plugin-openai had 1 new PRs (0 merged), 0 new issues, and 4 active contributors.",
  "topIssues": [],
  "topPRs": [
    {
      "id": "PR_kwDON0mV_867CDAd",
      "title": "feat: fix image description + add caching to audio and image handlers",
      "author": "odilitime",
      "number": 23,
      "body": "<!-- CURSOR_SUMMARY -->\n> [!NOTE]\n> Introduces persistent, database-backed caching to reduce duplicate OpenAI calls and latency.\n> \n> - `audio.ts` `handleTranscription`: content-based cache keys (slice-hashed blobs + params), best-effort get/set, and detailed debug logs\n> - `image.ts` `handleImageDescription`: URL/ETag/Last-Modified-based cache (default prompts only), consolidated `HEAD` request with 2s timeout, and >20MB size rejection with user-facing message\n> - Uses `max_completion_tokens` for newer models (`gpt-5`/`o1`/`o3`) while keeping `max_tokens` fallback\n> - Improved error parsing/logging with response body capture; cache failures are non-blocking\n> - No behavioral change to image generation; TTS helper unchanged aside from plumbing\n> \n> <sup>Written by [Cursor Bugbot](https://cursor.com/dashboard?tab=bugbot) for commit 07c22e3c25b5693ad4884229397042cd687b34ae. This will update automatically on new commits. Configure [here](https://cursor.com/dashboard?tab=bugbot).</sup>\n<!-- /CURSOR_SUMMARY -->\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n## Summary by CodeRabbit\n\n* **New Features**\n  * Persistent, content-aware caching for transcriptions and image descriptions (content hashing, header-based keys, URL fallbacks); cache persists across restarts and instances.\n* **Bug Fixes**\n  * Image size validation (~20MB) with clear user-facing errors; improved API error parsing and more descriptive error responses.\n  * Correct token parameter selection for newer model families.\n* **Chores**\n  * Best-effort cache behavior and enhanced debug logging; consolidated pre-checks for image requests.\n\n<sub>✏️ Tip: You can customize this high-level summary in your review settings.</sub>\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\n\nThis PR adds persistent database-backed caching to the audio transcription and image description handlers to optimize for Discord bots and other services that frequently process the same media files. The implementation includes:\n\n**Audio transcriptions (`audio.ts`)**:\n- Content-based caching using SHA-256 hashing (with fallback) to identify duplicate audio regardless of URL\n- Reads audio buffer once for both cache check and API call to avoid redundant I/O\n- Best-effort caching that doesn't block requests on cache failures\n\n**Image descriptions (`image.ts`)**:\n- URL-based caching for default prompts only (custom prompts bypass cache)\n- Image size validation via HEAD request to fail fast on oversized images (>20MB)\n- Support for newer model token parameters (`max_completion_tokens` for gpt-5/o1/o3 series)\n- Enhanced error handling with detailed error response logging\n\nBoth handlers follow a consistent pattern: check cache first, log appropriately, make API call if needed, cache successful results. The caching is designed to be non-intrusive with comprehensive logging for debugging.\n\n<h3>Confidence Score: 4/5</h3>\n\n\n- This PR is safe to merge with minimal risk - well-designed caching implementation with proper error handling\n- Score reflects solid architecture and error handling, but there's a minor cache collision risk in image.ts where different images at the same URL could be cached incorrectly if image content changes without URL change\n- Pay attention to `src/models/image.ts` - the URL-based caching could cause issues if image content at a URL changes without the URL changing\n\n<h3>Important Files Changed</h3>\n\n\n\n\n| Filename | Overview |\n|----------|----------|\n| src/models/audio.ts | Added content-based caching for transcriptions with robust SHA-256 hashing and fallback. Well-designed with proper error handling and detailed documentation. |\n| src/models/image.ts | Added URL-based caching, size validation, improved error handling, and max_completion_tokens support for newer models. Minor cache collision risk with URL-only keys. |\n\n</details>\n\n\n\n<h3>Sequence Diagram</h3>\n\n```mermaid\nsequenceDiagram\n    participant Client\n    participant Handler as Audio/Image Handler\n    participant Cache as Database Cache\n    participant OpenAI as OpenAI API\n\n    Client->>Handler: Request transcription/description\n    Handler->>Handler: Prepare media (hash audio/extract URL)\n    Handler->>Cache: Check cache with key\n    alt Cache HIT\n        Cache-->>Handler: Return cached result\n        Handler-->>Client: Return result (fast path)\n    else Cache MISS\n        Cache-->>Handler: No cached result\n        Handler->>OpenAI: API request with media\n        OpenAI-->>Handler: API response\n        Handler->>Cache: Store result (best-effort)\n        alt Cache write succeeds\n            Cache-->>Handler: Write confirmed\n        else Cache write fails\n            Cache-->>Handler: Write failed (logged, non-blocking)\n        end\n        Handler-->>Client: Return result\n    end\n```\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "repository": "elizaos-plugins/plugin-openai",
      "createdAt": "2025-12-30T21:44:22Z",
      "mergedAt": null,
      "additions": 408,
      "deletions": 7
    }
  ],
  "codeChanges": {
    "additions": 0,
    "deletions": 0,
    "files": 0,
    "commitCount": 6
  },
  "completedItems": [],
  "topContributors": [
    {
      "username": "standujar",
      "avatarUrl": "https://avatars.githubusercontent.com/u/16385918?u=718bdcd1585be8447bdfffb8c11ce249baa7532d&v=4",
      "totalScore": 166.39180288585692,
      "prScore": 132.05180288585692,
      "issueScore": 0,
      "reviewScore": 34,
      "commentScore": 0.33999999999999997,
      "summary": null
    },
    {
      "username": "wtfsayo",
      "avatarUrl": "https://avatars.githubusercontent.com/u/82053242?u=98209a1f10456f42d4d2fa71db4d5bf4a672cbc3&v=4",
      "totalScore": 137.05460688390212,
      "prScore": 134.61660688390214,
      "issueScore": 2,
      "reviewScore": 0,
      "commentScore": 0.43799999999999994,
      "summary": null
    },
    {
      "username": "vbkotecha",
      "avatarUrl": "https://avatars.githubusercontent.com/u/86377299?u=32a79d9adc10f2738dca41f4690de9ec944d8025&v=4",
      "totalScore": 43.8837738965761,
      "prScore": 43.5437738965761,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.33999999999999997,
      "summary": null
    },
    {
      "username": "greptile-apps",
      "avatarUrl": "https://avatars.githubusercontent.com/in/867647?v=4",
      "totalScore": 31.7,
      "prScore": 0,
      "issueScore": 0,
      "reviewScore": 31.5,
      "commentScore": 0.2,
      "summary": null
    },
    {
      "username": "odilitime",
      "avatarUrl": "https://avatars.githubusercontent.com/u/16395496?u=c9bac48e632aae594a0d85aaf9e9c9c69b674d8b&v=4",
      "totalScore": 30.021023349349527,
      "prScore": 25.021023349349527,
      "issueScore": 0,
      "reviewScore": 5,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "efeecllk",
      "avatarUrl": "https://avatars.githubusercontent.com/u/98906252?u=2e61afdda01f49499ce519e4024e5f0a20fa091e&v=4",
      "totalScore": 22.95669638293567,
      "prScore": 22.95669638293567,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "tdnupe3",
      "avatarUrl": "https://avatars.githubusercontent.com/u/25161668?u=94680b6bcbcfce954c7a9dd09d667a3919953041&v=4",
      "totalScore": 13.747573590279972,
      "prScore": 13.547573590279972,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.2,
      "summary": null
    },
    {
      "username": "borisudovicic",
      "avatarUrl": "https://avatars.githubusercontent.com/u/31806472?u=8935f4d43fd7e4eb9bf5ff92d54d4d2f8ac8a786&v=4",
      "totalScore": 10,
      "prScore": 0,
      "issueScore": 10,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "ChristopherTrimboli",
      "avatarUrl": "https://avatars.githubusercontent.com/u/27584221?u=0d816ce1dcdea8f925aba18bb710153d4a87a719&v=4",
      "totalScore": 5,
      "prScore": 0,
      "issueScore": 0,
      "reviewScore": 5,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "linear",
      "avatarUrl": "https://avatars.githubusercontent.com/in/20150?v=4",
      "totalScore": 4,
      "prScore": 0,
      "issueScore": 4,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    }
  ],
  "newPRs": 1,
  "mergedPRs": 0,
  "newIssues": 0,
  "closedIssues": 0,
  "activeContributors": 4
}