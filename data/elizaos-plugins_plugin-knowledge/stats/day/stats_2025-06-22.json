{
  "interval": {
    "intervalStart": "2025-06-22T00:00:00.000Z",
    "intervalEnd": "2025-06-23T00:00:00.000Z",
    "intervalType": "day"
  },
  "repository": "elizaos-plugins/plugin-knowledge",
  "overview": "From 2025-06-22 to 2025-06-23, elizaos-plugins/plugin-knowledge had 0 new PRs (1 merged), 0 new issues, and 4 active contributors.",
  "topIssues": [],
  "topPRs": [
    {
      "id": "PR_kwDOOu4gVs6bb8qs",
      "title": "fix: removing duplicate middleware and update file upload handling",
      "author": "standujar",
      "number": 25,
      "body": "## Problem\r\n\r\nThe knowledge plugin was experiencing consistent `\"Unexpected end of form\"` errors during file uploads, caused by **double parsing** of multipart form data:\r\n\r\n1. **Global middleware**: The main server (`eliza/packages/server/src/index.ts`) already applies a global `express-fileupload` middleware to all routes\r\n2. **Plugin middleware**: The knowledge plugin was applying its own middleware on top\r\n3. **Result**: Attempting to re-parse an already consumed stream ‚Üí busboy error\r\n\r\n### Error logs\r\n```\r\nERROR: [KNOWLEDGE UPLOAD] Upload error:\r\n    message: \"Unexpected end of form\"\r\n    stack: \"Error: Unexpected end of form\r\n    at Multipart._final (/workspaces/node_modules/busboy/lib/types/multipart.js:588:17)\"\r\n```\r\n\r\n## Solution\r\n\r\n**Remove duplicate middleware and use files already parsed by the global middleware.**\r\n\r\n### Changes Made\r\n\r\n#### 1. Removed duplicate express-fileupload / Multer configuration\r\n- ‚ùå Deleted `createUploadMiddleware()` function\r\n- ‚ùå Removed import\r\n- ‚ùå Eliminated custom middleware application logic\r\n- ‚úÖ Simplified upload handler\r\n\r\n#### 3. Fixed file reading logic\r\nUpdated to prioritize temporary files (used by global middleware) over in-memory buffers:\r\n\r\n```typescript\r\n// BEFORE: Assumed in-memory buffers\r\nif (file.data) { fileBuffer = file.data; }\r\n\r\n// AFTER: Prioritize temp files from global middleware\r\nif (filePath && fs.existsSync(filePath)) {\r\n  fileBuffer = await fs.promises.readFile(filePath);\r\n} else if (file.data && Buffer.isBuffer(file.data)) {\r\n  fileBuffer = file.data; // fallback\r\n}\r\n```\r\n\r\n## Testing\r\n\r\n- ‚úÖ File uploads now work without \"Unexpected end of form\" errors\r\n- ‚úÖ Both single and multiple file uploads tested\r\n- ‚úÖ Large files (130KB+) upload successfully\r\n- ‚úÖ Logging confirms files are read from temp files as expected\r\n\r\n## Breaking Changes\r\n\r\n**None** - This is purely a bug fix that removes unnecessary duplicate processing.\r\n\r\n## Performance Impact\r\n\r\n- ‚ö° **Faster uploads**: Eliminates duplicate parsing overhead\r\n- üõ°Ô∏è **More reliable**: Removes race conditions and connection issues\r\n- üßπ **Cleaner code**: 80% reduction in middleware complexity\r\n\r\n## Files Changed\r\n\r\n- `plugin-knowledge/src/routes.ts`: Removed duplicate middleware, simplified upload handler\r\n\r\n## Migration Notes\r\n\r\nNo migration needed. The plugin now correctly uses the existing global `express-fileupload` middleware instead of creating its own conflicting instance.\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n\n## Summary by CodeRabbit\n\n- **Documentation**\n  - Added a new section explaining file upload configuration, supported file types, and MIME type handling to the troubleshooting guide.\n\n- **Chores**\n  - Removed unused dependencies related to file upload handling.\n\n- **Refactor**\n  - Replaced the previous file upload middleware with a global approach, improved file validation and error handling, and updated the upload process for better reliability.\n\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->",
      "repository": "elizaos-plugins/plugin-knowledge",
      "createdAt": "2025-06-20T15:12:51Z",
      "mergedAt": "2025-06-22T17:00:59Z",
      "additions": 1500,
      "deletions": 86
    }
  ],
  "codeChanges": {
    "additions": 1500,
    "deletions": 86,
    "files": 4,
    "commitCount": 0
  },
  "completedItems": [
    {
      "title": "fix: removing duplicate middleware and update file upload handling",
      "prNumber": 25,
      "type": "bugfix",
      "body": "## Problem\r\n\r\nThe knowledge plugin was experiencing consistent `\"Unexpected end of form\"` errors during file uploads, caused by **double parsing** of multipart form data:\r\n\r\n1. **Global middleware**: The main server (`eliza/packages/server/",
      "files": [
        "README.md",
        "bun.lock",
        "package.json",
        "src/routes.ts"
      ]
    }
  ],
  "topContributors": [
    {
      "username": "wtfsayo",
      "avatarUrl": "https://avatars.githubusercontent.com/u/82053242?u=98209a1f10456f42d4d2fa71db4d5bf4a672cbc3&v=4",
      "totalScore": 133.22701567195668,
      "prScore": 128.5270156719567,
      "issueScore": 0,
      "reviewScore": 4.5,
      "commentScore": 0.2,
      "summary": "wtfsayo: Merged 2 PRs (#5240 with +18273/-13899 lines and #5239 with +59/-124 lines) and opened 1 new PR (#5241), focusing on feature work and type-safe API client migration. Made significant code changes across 110 files (+4267/-577 lines) with consistent activity throughout the day."
    },
    {
      "username": "ChristopherTrimboli",
      "avatarUrl": "https://avatars.githubusercontent.com/u/27584221?u=0d816ce1dcdea8f925aba18bb710153d4a87a719&v=4",
      "totalScore": 115.1325477931522,
      "prScore": 109.9325477931522,
      "issueScore": 0,
      "reviewScore": 5,
      "commentScore": 0.2,
      "summary": "ChristopherTrimboli: Merged 2 PRs (#5237 and #5236) with significant changes (+560/-1040 lines and +9578/-7862 lines respectively), while modifying 170 files overall (+10074/-8773 lines) across 4 commits. Actively engaged with the community by commenting on 1 issue and providing 1 review with an approval."
    },
    {
      "username": "lalalune",
      "avatarUrl": "https://avatars.githubusercontent.com/u/18633264?u=e2e906c3712c2506ebfa98df01c2cfdc50050b30&v=4",
      "totalScore": 33.6817738965761,
      "prScore": 33.6817738965761,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": "lalalune: Opened 1 pull request (#5242) titled \"Next\" but did not merge any PRs today, showing sporadic activity with no other contributions."
    },
    {
      "username": "kilavvy",
      "avatarUrl": "https://avatars.githubusercontent.com/u/140459108?u=4f7b40be12f0a9908fac42a21f08933ec01bbec4&v=4",
      "totalScore": 22.8094379124341,
      "prScore": 22.8094379124341,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": "kilavvy: Merged 1 PR (#5238) that corrected typos in documentation and comments (+2/-2 lines), with a consistent activity pattern reflected in daily contributions. Modified 2 files with a total of 2 lines changed, maintaining a focus on other work."
    },
    {
      "username": "github-advanced-security",
      "avatarUrl": "https://avatars.githubusercontent.com/in/57789?v=4",
      "totalScore": 4.5,
      "prScore": 0,
      "issueScore": 0,
      "reviewScore": 4.5,
      "commentScore": 0,
      "summary": "github-advanced-security: Engaged in the review process with 1 review comment but did not approve or request changes. The activity pattern shows sporadic engagement, being active on only 0 out of 1 days."
    },
    {
      "username": "lord-dubious",
      "avatarUrl": "https://avatars.githubusercontent.com/u/26337383?v=4",
      "totalScore": 4,
      "prScore": 0,
      "issueScore": 4,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    }
  ],
  "newPRs": 0,
  "mergedPRs": 1,
  "newIssues": 0,
  "closedIssues": 0,
  "activeContributors": 4
}